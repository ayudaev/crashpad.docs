<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Crashpad: crashpad::test::Multiprocess Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Crashpad
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecrashpad.html">crashpad</a></li><li class="navelem"><a class="el" href="namespacecrashpad_1_1test.html">test</a></li><li class="navelem"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html">Multiprocess</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classcrashpad_1_1test_1_1Multiprocess-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">crashpad::test::Multiprocess Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Manages a multiprocess test.  
 <a href="classcrashpad_1_1test_1_1Multiprocess.html#details">More...</a></p>

<p><code>#include &quot;util/test/multiprocess.h&quot;</code></p>
<div class="dynheader">
Inheritance diagram for crashpad::test::Multiprocess:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classcrashpad_1_1test_1_1Multiprocess.png" usemap="#crashpad::test::Multiprocess_map" alt=""/>
  <map id="crashpad::test::Multiprocess_map" name="crashpad::test::Multiprocess_map">
<area href="classcrashpad_1_1test_1_1MachMultiprocess.html" title="Manages a Mach-aware multiprocess test. " alt="crashpad::test::MachMultiprocess" shape="rect" coords="0,56,200,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a801aa7a78b2254c31c3ef7e0b24208e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a801aa7a78b2254c31c3ef7e0b24208e3">Run</a> ()</td></tr>
<tr class="memdesc:a801aa7a78b2254c31c3ef7e0b24208e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the test.  <a href="#a801aa7a78b2254c31c3ef7e0b24208e3">More...</a><br /></td></tr>
<tr class="separator:a801aa7a78b2254c31c3ef7e0b24208e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a122d18401346cf600a4f6ab63d83c8ca"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a122d18401346cf600a4f6ab63d83c8ca">PreFork</a> ()</td></tr>
<tr class="memdesc:a122d18401346cf600a4f6ab63d83c8ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establishes the proper testing environment prior to forking.  <a href="#a122d18401346cf600a4f6ab63d83c8ca">More...</a><br /></td></tr>
<tr class="separator:a122d18401346cf600a4f6ab63d83c8ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fde053ad00979ca2f03810afd45b7ec"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a3fde053ad00979ca2f03810afd45b7ec">ChildPID</a> () const </td></tr>
<tr class="memdesc:a3fde053ad00979ca2f03810afd45b7ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the child process’ process ID.  <a href="#a3fde053ad00979ca2f03810afd45b7ec">More...</a><br /></td></tr>
<tr class="separator:a3fde053ad00979ca2f03810afd45b7ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad51dda8c20fd42d92546d0fb4c3dc8c5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#ad51dda8c20fd42d92546d0fb4c3dc8c5">ReadPipeFD</a> () const </td></tr>
<tr class="memdesc:ad51dda8c20fd42d92546d0fb4c3dc8c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the read pipe’s file descriptor.  <a href="#ad51dda8c20fd42d92546d0fb4c3dc8c5">More...</a><br /></td></tr>
<tr class="separator:ad51dda8c20fd42d92546d0fb4c3dc8c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a960745cd720836f2fe56ca44cb19751d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a960745cd720836f2fe56ca44cb19751d">WritePipeFD</a> () const </td></tr>
<tr class="memdesc:a960745cd720836f2fe56ca44cb19751d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the write pipe’s file descriptor.  <a href="#a960745cd720836f2fe56ca44cb19751d">More...</a><br /></td></tr>
<tr class="separator:a960745cd720836f2fe56ca44cb19751d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages a multiprocess test. </p>
<p>These tests are <code>fork()</code>-based. The parent and child processes are able to communicate via a pair of POSIX pipes.</p>
<p>Subclasses are expected to implement the parent and child by overriding the appropriate methods. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3fde053ad00979ca2f03810afd45b7ec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pid_t crashpad::test::Multiprocess::ChildPID </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the child process’ process ID. </p>
<p>This method may only be called by the parent process. </p>

</div>
</div>
<a class="anchor" id="a122d18401346cf600a4f6ab63d83c8ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void crashpad::test::Multiprocess::PreFork </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Establishes the proper testing environment prior to forking. </p>
<p>Subclasses that solely implement a test should not need to override this method. Subclasses that do not implement tests but instead implement additional testing features on top of this class may override this method provided that they call the superclass’ implementation first as follows:</p>
<div class="fragment"><div class="line"><span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcrashpad_1_1test_1_1Multiprocess.html#a122d18401346cf600a4f6ab63d83c8ca">PreFork</a>()<span class="keyword"> override </span>{</div>
<div class="line">  <a class="code" href="classcrashpad_1_1test_1_1Multiprocess.html#a122d18401346cf600a4f6ab63d83c8ca">Multiprocess::PreFork</a>();</div>
<div class="line">  <span class="keywordflow">if</span> (testing::Test::HasFatalAssertions()) {</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Place subclass-specific pre-fork code here.</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Subclass implementations may signal failure by raising their own fatal gtest assertions. </p>

<p>Reimplemented in <a class="el" href="classcrashpad_1_1test_1_1MachMultiprocess.html#aac4af4a4c943686538069de230fe7abe">crashpad::test::MachMultiprocess</a>.</p>

</div>
</div>
<a class="anchor" id="ad51dda8c20fd42d92546d0fb4c3dc8c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int crashpad::test::Multiprocess::ReadPipeFD </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the read pipe’s file descriptor. </p>
<p>This method may be called by either the parent or the child process. Anything written to the write pipe in the partner process will appear on the this file descriptor in this process. </p>

</div>
</div>
<a class="anchor" id="a801aa7a78b2254c31c3ef7e0b24208e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void crashpad::test::Multiprocess::Run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs the test. </p>
<p>This method establishes the proper testing environment by calling <a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a122d18401346cf600a4f6ab63d83c8ca" title="Establishes the proper testing environment prior to forking. ">PreFork()</a>, then calls <code>fork()</code>. In the parent process, it calls RunParent(), and in the child process, it calls RunChild().</p>
<p>This method uses gtest assertions to validate the testing environment. If the testing environment cannot be set up properly, it is possible that MultiprocessParent() or MultiprocessChild() will not be called. In the parent process, this method also waits for the child process to exit after MultiprocessParent() returns, and verifies that it exited cleanly without raising any gtest assertions. </p>

</div>
</div>
<a class="anchor" id="a960745cd720836f2fe56ca44cb19751d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int crashpad::test::Multiprocess::WritePipeFD </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the write pipe’s file descriptor. </p>
<p>This method may be called by either the parent or the child process. Anything written to this file descriptor in this process will appear on the read pipe in the partner process. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>util/test/multiprocess.h</li>
<li>util/test/multiprocess.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
