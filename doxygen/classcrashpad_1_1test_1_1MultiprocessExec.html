<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Crashpad: crashpad::test::MultiprocessExec Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Crashpad
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecrashpad.html">crashpad</a></li><li class="navelem"><a class="el" href="namespacecrashpad_1_1test.html">test</a></li><li class="navelem"><a class="el" href="classcrashpad_1_1test_1_1MultiprocessExec.html">MultiprocessExec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classcrashpad_1_1test_1_1MultiprocessExec-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">crashpad::test::MultiprocessExec Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Manages an <code>exec()</code>-based multiprocess test.  
 <a href="classcrashpad_1_1test_1_1MultiprocessExec.html#details">More...</a></p>

<p><code>#include &quot;util/test/multiprocess_exec.h&quot;</code></p>
<div class="dynheader">
Inheritance diagram for crashpad::test::MultiprocessExec:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classcrashpad_1_1test_1_1MultiprocessExec.png" usemap="#crashpad::test::MultiprocessExec_map" alt=""/>
  <map id="crashpad::test::MultiprocessExec_map" name="crashpad::test::MultiprocessExec_map">
<area href="classcrashpad_1_1test_1_1Multiprocess.html" title="Manages a multiprocess test. " alt="crashpad::test::Multiprocess" shape="rect" coords="0,0,196,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab9452634e0a74a66a319385e6d8ffc4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1MultiprocessExec.html#ab9452634e0a74a66a319385e6d8ffc4a">SetChildCommand</a> (const std::string &amp;command, const std::vector&lt; std::string &gt; *arguments)</td></tr>
<tr class="memdesc:ab9452634e0a74a66a319385e6d8ffc4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the command to <code>exec()</code> in the child.  <a href="#ab9452634e0a74a66a319385e6d8ffc4a">More...</a><br /></td></tr>
<tr class="separator:ab9452634e0a74a66a319385e6d8ffc4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classcrashpad_1_1test_1_1Multiprocess"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classcrashpad_1_1test_1_1Multiprocess')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html">crashpad::test::Multiprocess</a></td></tr>
<tr class="memitem:a801aa7a78b2254c31c3ef7e0b24208e3 inherit pub_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a801aa7a78b2254c31c3ef7e0b24208e3">Run</a> ()</td></tr>
<tr class="memdesc:a801aa7a78b2254c31c3ef7e0b24208e3 inherit pub_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the test.  <a href="#a801aa7a78b2254c31c3ef7e0b24208e3">More...</a><br /></td></tr>
<tr class="separator:a801aa7a78b2254c31c3ef7e0b24208e3 inherit pub_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a619dd6b1fd2a909df6f3d6b2e1c75ad2 inherit pub_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a619dd6b1fd2a909df6f3d6b2e1c75ad2">SetExpectedChildTermination</a> (<a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#adedaaa5fbbb57de1ae5af8ef7c84b4bf">TerminationReason</a> reason, int code)</td></tr>
<tr class="memdesc:a619dd6b1fd2a909df6f3d6b2e1c75ad2 inherit pub_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the expected termination reason and code.  <a href="#a619dd6b1fd2a909df6f3d6b2e1c75ad2">More...</a><br /></td></tr>
<tr class="separator:a619dd6b1fd2a909df6f3d6b2e1c75ad2 inherit pub_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a4fbe35bfe7dd75624b417c435ae2208b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1MultiprocessExec.html#a4fbe35bfe7dd75624b417c435ae2208b">PreFork</a> () override</td></tr>
<tr class="memdesc:a4fbe35bfe7dd75624b417c435ae2208b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establishes the proper testing environment prior to forking.  <a href="#a4fbe35bfe7dd75624b417c435ae2208b">More...</a><br /></td></tr>
<tr class="separator:a4fbe35bfe7dd75624b417c435ae2208b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classcrashpad_1_1test_1_1Multiprocess')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html">crashpad::test::Multiprocess</a></td></tr>
<tr class="memitem:a3fde053ad00979ca2f03810afd45b7ec inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a3fde053ad00979ca2f03810afd45b7ec">ChildPID</a> () const </td></tr>
<tr class="memdesc:a3fde053ad00979ca2f03810afd45b7ec inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the child process’ process ID.  <a href="#a3fde053ad00979ca2f03810afd45b7ec">More...</a><br /></td></tr>
<tr class="separator:a3fde053ad00979ca2f03810afd45b7ec inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eb0b639619a13368ba090315706c549 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecrashpad.html#a07f8e33c4fdeba3783277f9f2563e48a">FileHandle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a9eb0b639619a13368ba090315706c549">ReadPipeHandle</a> () const </td></tr>
<tr class="memdesc:a9eb0b639619a13368ba090315706c549 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the read pipe’s file handle.  <a href="#a9eb0b639619a13368ba090315706c549">More...</a><br /></td></tr>
<tr class="separator:a9eb0b639619a13368ba090315706c549 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32f6665ce408f2a1e713bc656316d312 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecrashpad.html#a07f8e33c4fdeba3783277f9f2563e48a">FileHandle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a32f6665ce408f2a1e713bc656316d312">WritePipeHandle</a> () const </td></tr>
<tr class="memdesc:a32f6665ce408f2a1e713bc656316d312 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the write pipe’s file handle.  <a href="#a32f6665ce408f2a1e713bc656316d312">More...</a><br /></td></tr>
<tr class="separator:a32f6665ce408f2a1e713bc656316d312 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ec1079c25eca71250ff3ccf8ec2b72 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a89ec1079c25eca71250ff3ccf8ec2b72">CloseReadPipe</a> ()</td></tr>
<tr class="memdesc:a89ec1079c25eca71250ff3ccf8ec2b72 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the read pipe.  <a href="#a89ec1079c25eca71250ff3ccf8ec2b72">More...</a><br /></td></tr>
<tr class="separator:a89ec1079c25eca71250ff3ccf8ec2b72 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7a2037501f89d4d8aa3099285b7ae9 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a9d7a2037501f89d4d8aa3099285b7ae9">CloseWritePipe</a> ()</td></tr>
<tr class="memdesc:a9d7a2037501f89d4d8aa3099285b7ae9 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the write pipe.  <a href="#a9d7a2037501f89d4d8aa3099285b7ae9">More...</a><br /></td></tr>
<tr class="separator:a9d7a2037501f89d4d8aa3099285b7ae9 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af170901b8c26c3c24fc82419df305e1c inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af170901b8c26c3c24fc82419df305e1c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_info</b> (<a class="el" href="structcrashpad_1_1test_1_1internal_1_1MultiprocessInfo.html">internal::MultiprocessInfo</a> *info)</td></tr>
<tr class="separator:af170901b8c26c3c24fc82419df305e1c inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21d17479b00152c3511de0b6d87c8727 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a21d17479b00152c3511de0b6d87c8727"></a>
<a class="el" href="structcrashpad_1_1test_1_1internal_1_1MultiprocessInfo.html">internal::MultiprocessInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>info</b> ()</td></tr>
<tr class="separator:a21d17479b00152c3511de0b6d87c8727 inherit pro_methods_classcrashpad_1_1test_1_1Multiprocess"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classcrashpad_1_1test_1_1Multiprocess"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classcrashpad_1_1test_1_1Multiprocess')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html">crashpad::test::Multiprocess</a></td></tr>
<tr class="memitem:adedaaa5fbbb57de1ae5af8ef7c84b4bf inherit pub_types_classcrashpad_1_1test_1_1Multiprocess"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#adedaaa5fbbb57de1ae5af8ef7c84b4bf">TerminationReason</a> : bool </td></tr>
<tr class="memdesc:adedaaa5fbbb57de1ae5af8ef7c84b4bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The termination type for a child process.  <a href="classcrashpad_1_1test_1_1Multiprocess.html#adedaaa5fbbb57de1ae5af8ef7c84b4bf">More...</a><br /></td></tr>
<tr class="separator:adedaaa5fbbb57de1ae5af8ef7c84b4bf inherit pub_types_classcrashpad_1_1test_1_1Multiprocess"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages an <code>exec()</code>-based multiprocess test. </p>
<p>These tests are based on <code>fork()</code> and <code>exec()</code>. The parent process is able to communicate with the child in the same manner as a base-class <a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html" title="Manages a multiprocess test. ">Multiprocess</a> parent. The read and write pipes appear in the child process on stdin and stdout, respectively.</p>
<p>Subclasses are expected to implement the parent in the same was as a base-class <a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html" title="Manages a multiprocess test. ">Multiprocess</a> parent. The child must be implemented in an executable to be set by <a class="el" href="classcrashpad_1_1test_1_1MultiprocessExec.html#ab9452634e0a74a66a319385e6d8ffc4a" title="Sets the command to exec() in the child. ">SetChildCommand()</a>. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4fbe35bfe7dd75624b417c435ae2208b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void crashpad::test::MultiprocessExec::PreFork </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Establishes the proper testing environment prior to forking. </p>
<p>Subclasses that solely implement a test should not need to override this method. Subclasses that do not implement tests but instead implement additional testing features on top of this class may override this method provided that they call the superclass’ implementation first as follows:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="classcrashpad_1_1test_1_1MultiprocessExec.html#a4fbe35bfe7dd75624b417c435ae2208b">PreFork</a>()<span class="keyword"> override </span>{</div>
<div class="line">  ASSERT_NO_FATAL_FAILURE(<a class="code" href="classcrashpad_1_1test_1_1Multiprocess.html#a122d18401346cf600a4f6ab63d83c8ca">Multiprocess::PreFork</a>());</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Place subclass-specific pre-fork code here.</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Subclass implementations may signal failure by raising their own fatal gtest assertions. </p>

<p>Reimplemented from <a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a122d18401346cf600a4f6ab63d83c8ca">crashpad::test::Multiprocess</a>.</p>

</div>
</div>
<a class="anchor" id="ab9452634e0a74a66a319385e6d8ffc4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void crashpad::test::MultiprocessExec::SetChildCommand </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; *&#160;</td>
          <td class="paramname"><em>arguments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the command to <code>exec()</code> in the child. </p>
<p>This method must be called before the test can be <a class="el" href="classcrashpad_1_1test_1_1Multiprocess.html#a801aa7a78b2254c31c3ef7e0b24208e3" title="Runs the test. ">Run()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">command</td><td>The executable’s pathname. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arguments</td><td>The command-line arguments to pass to the child process in its <code>argv[]</code> vector. This vector must begin at <code>argv[1]</code>, as <em>command</em> is implicitly used as <code>argv[0]</code>. This argument may be <code>nullptr</code> if no command-line arguments are to be passed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>util/test/multiprocess_exec.h</li>
<li>util/test/multiprocess_exec_posix.cc</li>
<li>util/test/multiprocess_exec_win.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
